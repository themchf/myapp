!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){var b={},c={};a.ajaxq=function(d,e){function j(a){if(b[d])b[d].push(a);else{b[d]=[];var e=a();c[d]=e}}function k(){if(b[d]){var a=b[d].shift();if(a){var e=a();c[d]=e}else delete b[d],delete c[d]}}if(void 0===e)throw"AjaxQ: queue name is not provided";var f=a.Deferred(),g=f.promise();g.success=g.done,g.error=g.fail,g.complete=g.always;var h="function"==typeof e,i=h?null:a.extend(!0,{},e);return j(function(){var b=a.ajax.apply(window,[h?e():i]);return b.done(function(){f.resolve.apply(this,arguments)}),b.fail(function(){f.reject.apply(this,arguments)}),b.always(k),b}),g},a.each(["getq","postq"],function(b,c){a[c]=function(b,d,e,f,g){return a.isFunction(e)&&(g=g||f,f=e,e=void 0),a.ajaxq(b,{type:"postq"===c?"post":"get",url:d,data:e,success:f,dataType:g})}});var d=function(a){return b.hasOwnProperty(a)&&b[a].length>0||c.hasOwnProperty(a)},e=function(){for(var a in b)if(d(a))return!0;return!1};a.ajaxq.isRunning=function(a){return a?d(a):e()},a.ajaxq.getActiveRequest=function(a){if(!a)throw"AjaxQ: queue name is required";return c[a]},a.ajaxq.abort=function(d){if(!d)throw"AjaxQ: queue name is required";var e=a.ajaxq.getActiveRequest(d);delete b[d],delete c[d],e&&e.abort()},a.ajaxq.clear=function(a){if(a)b[a]&&(b[a]=[]);else for(var c in b)b.hasOwnProperty(c)&&(b[c]=[])}});